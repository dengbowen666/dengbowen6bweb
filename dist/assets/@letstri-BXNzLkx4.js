import{d as B,r as x,b as Y,e as z,f as A,p as H,g as L,i as U,o as D,c as W,j as C,n as K,u as _,t as O,k as q}from"./@vue-wvVVz0zV.js";var X=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function J(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var F="Expected a function",P=NaN,Q="[object Symbol]",Z=/^\s+|\s+$/g,G=/^[-+]0x[0-9a-f]+$/i,N=/^0b[01]+$/i,V=/^0o[0-7]+$/i,tt=parseInt,et=typeof X=="object"&&X&&X.Object===Object&&X,nt=typeof self=="object"&&self&&self.Object===Object&&self,it=et||nt||Function("return this")(),at=Object.prototype,rt=at.toString,ot=Math.max,lt=Math.min,E=function(){return it.Date.now()};function ut(t,n,e){var o,u,l,s,i,a,r=0,d=!1,f=!1,g=!0;if(typeof t!="function")throw new TypeError(F);n=S(n)||0,$(e)&&(d=!!e.leading,f="maxWait"in e,l=f?ot(S(e.maxWait)||0,n):l,g="trailing"in e?!!e.trailing:g);function b(c){var m=o,w=u;return o=u=void 0,r=c,s=t.apply(w,m),s}function p(c){return r=c,i=setTimeout(y,n),d?b(c):s}function v(c){var m=c-a,w=c-r,T=n-m;return f?lt(T,l-w):T}function h(c){var m=c-a,w=c-r;return a===void 0||m>=n||m<0||f&&w>=l}function y(){var c=E();if(h(c))return M(c);i=setTimeout(y,v(c))}function M(c){return i=void 0,g&&o?b(c):(o=u=void 0,s)}function I(){i!==void 0&&clearTimeout(i),r=0,o=a=u=i=void 0}function R(){return i===void 0?s:M(E())}function j(){var c=E(),m=h(c);if(o=arguments,u=this,a=c,m){if(i===void 0)return p(a);if(f)return i=setTimeout(y,n),b(a)}return i===void 0&&(i=setTimeout(y,n)),s}return j.cancel=I,j.flush=R,j}function st(t,n,e){var o=!0,u=!0;if(typeof t!="function")throw new TypeError(F);return $(e)&&(o="leading"in e?!!e.leading:o,u="trailing"in e?!!e.trailing:u),ut(t,n,{leading:o,maxWait:n,trailing:u})}function $(t){var n=typeof t;return!!t&&(n=="object"||n=="function")}function ct(t){return!!t&&typeof t=="object"}function dt(t){return typeof t=="symbol"||ct(t)&&rt.call(t)==Q}function S(t){if(typeof t=="number")return t;if(dt(t))return P;if($(t)){var n=typeof t.valueOf=="function"?t.valueOf():t;t=$(n)?n+"":n}if(typeof t!="string")return t===0?t:+t;t=t.replace(Z,"");var e=N.test(t);return e||V.test(t)?tt(t.slice(2),e?2:8):G.test(t)?P:+t}var ft=st;const vt=J(ft),k=(t,n,e)=>e&&t>e?e:n&&t<n?n:t,pt=t=>{const{referencePosition:n,shape:e,cycles:o,strength:u}=t,l=(n.x-e.left)*(Math.PI*2)/e.width,s=(n.y-e.top)*(Math.PI*2)/e.height,i=e.width*Math.sin(l*o),a=e.height*Math.sin(s*o);return{x:i*u/(e.width/2),y:a*u/(e.height/2)}},mt=({y:t,x:n,originX:e=50,originY:o=50,strength:u=10,minX:l,minY:s,maxX:i,maxY:a})=>{const r=k((n-e/50)*u,l,i),d=k((t-o/50)*u,s,a);return{x:r,y:d}},gt=t=>({x:t?t.width/2:0,y:t?t.height/2:0}),ht=t=>t.bottom>=0&&t.right>=0&&t.top<=(window.innerHeight||document.documentElement.clientHeight)&&t.left<=(window.innerWidth||document.documentElement.clientWidth),yt=()=>{try{return/Mobi|Android/i.test(navigator.userAgent)}catch{return!0}},xt=({target:t,event:n})=>{const e=n.clientX,o=n.clientY,u=e-t.left,l=o-t.top,s=gt(t),i=u/s.x,a=l/s.y;return{x:i,y:a,target:t}},bt=B({__name:"KinesisContainer",props:{disabled:{type:Boolean,default:!1},duration:{default:1e3},easing:{default:"cubic-bezier(0.23, 1, 0.32, 1)"},perspective:{default:0}},setup(t){const n=x(),e=x({width:0,height:0,top:0,right:0,bottom:0,left:0}),o=x(!1),u=x(!1),l=x({x:1,y:1}),s=x(),i=yt(),a=Y(()=>({move:{action:(p,v)=>xt({target:p,event:v}),condition:o.value&&!i,type:i?"deviceorientation":null}})),r=()=>{t.disabled||(o.value=!0)},d=()=>{t.disabled||(u.value=!0,o.value=!1)},f=vt(p=>{if(t.disabled||!n.value)return;const v=p;!o.value&&!u.value&&r(),e.value=n.value.getBoundingClientRect();const h=ht(e.value),y=a.value.move.condition,M=a.value.move.action;h&&y&&(l.value=M(e.value,v),s.value={x:v.clientX,y:v.clientY})},100),g=()=>{i&&window.addEventListener("deviceorientation",f,!0)},b=()=>{i&&window.removeEventListener("deviceorientation",f,!0)};return z(g),A(b),H("context",L(U({duration:t.duration,easing:t.easing,eventData:s,isMoving:o,movement:l,shape:e}))),(p,v)=>(D(),W("div",{ref_key:"container",ref:n,style:K(p.perspective?{perspective:`${p.perspective}px`}:void 0),onMousemove:v[0]||(v[0]=(...h)=>_(f)&&_(f)(...h)),onMouseenter:r,onMouseleave:d},[C(p.$slots,"default")],36))}}),wt=(t,n,e)=>{const o=(i,a)=>`translate3d(${-i}px, ${-a}px, 0)`,u=(i,a)=>{let r=0;return t.value?t.value==="x"?r=2*i:t.value==="y"&&(r=2*a):r=i+a,`rotate3d(0,0,1,${r}deg)`},l=(i,a,r)=>`rotateX(${-a}deg) rotateY(${i}deg) translate3d(0,0,${r*2}px)`,s=(i,a)=>{const r=Math.sign(n.value)*(Math.abs(i)+Math.abs(a))/10+1;return`scale3d(${e.value==="scaleX"||e.value==="scale"?r:1}, ${e.value==="scaleY"||e.value==="scale"?r:1}, 1)`};return{transformSwitch:(i,a,r,d)=>{switch(i==="scaleX"||i==="scaleY"?"scale":i){case"translate":return o(a,r);case"translate-inv":return o(-a,-r);case"rotate":return u(a,r);case"depth":return l(a,r,d);case"depth-inv":return l(-a,-r,d);case"scale":return s(a,r)}}}},Mt=B({__name:"KinesisElement",props:{type:{default:"translate"},transformOrigin:{default:"center"},originX:{default:50},originY:{default:50},strength:{default:10},axis:{default:null},maxX:{default:null},maxY:{default:null},minX:{default:null},minY:{default:null},cycles:{default:0}},setup(t){const n=O(()=>t.axis),e=O(()=>t.strength),o=O(()=>t.type),{transformSwitch:u}=wt(n,e,o),l=q("context"),s=Y(()=>t.type==="depth"||t.type==="depth-inv"?Math.abs(t.strength):t.strength),i=Y(()=>{if(!l||!l.shape||!l.isMoving)return{};let r=0,d=0;const{x:f,y:g}=t.cycles<1?mt({...l.movement,originX:t.originX,originY:t.originY,strength:s.value,minX:t.minX,minY:t.minY,maxX:t.maxX,maxY:t.maxY}):pt({referencePosition:l.eventData,shape:l.shape,cycles:t.cycles,strength:s.value});return r=t.axis==="y"?0:f,d=t.axis==="x"?0:g,{transform:u(t.type,r,d,t.strength)}}),a=Y(()=>({transformOrigin:t.transformOrigin,transitionProperty:"transform",transitionDuration:`${(l==null?void 0:l.duration)??0}ms`,transitionTimingFunction:(l==null?void 0:l.easing)??"linear"}));return(r,d)=>(D(),W("div",{style:K({...i.value,...a.value})},[C(r.$slots,"default")],4))}}),Yt={install(t){t.component("KinesisContainer",bt),t.component("KinesisElement",Mt)}};export{Yt as X};
